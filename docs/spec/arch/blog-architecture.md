# Blog Architecture Overview

## System Architecture

```mermaid
graph TD
    subgraph "Content Layer"
        A["content/posts/*.md<br/>(blog posts)"]
        B["content/about.md<br/>content/cv.md<br/>content/publications.md<br/>(static pages)"]
        C["content/search/_index.md<br/>(search page)"]
        D["content/ai-disclaimer.md"]
        E["static/bib/*.bib<br/>(45 BibTeX files)"]
        F["static/images/<br/>(headshot, logos, hero images)"]
    end

    subgraph "Configuration"
        G["hugo.toml<br/>(site config, menus, params,<br/>taxonomies, analytics)"]
    end

    subgraph "Theme Layer (git submodule)"
        H["themes/coder/<br/>(Hugo Coder theme)"]
        I["Base templates, partials,<br/>SCSS, Font Awesome"]
    end

    subgraph "Project Overrides"
        J["assets/scss/<br/>(SCSS variable overrides:<br/>white/black palette)"]
        K["assets/css/<br/>(custom.css, cv-timeline.css)"]
        L["assets/js/<br/>(timeline, search, share,<br/>reading-progress, collapsible-code)"]
        M["layouts/<br/>(template overrides:<br/>header, home, single post,<br/>search, image render hook)"]
    end

    subgraph "Hugo Build Pipeline"
        N["Hugo SSG v0.156.0<br/>(extended, Dart Sass)"]
    end

    subgraph "Deployment"
        O[".github/workflows/hugo.yml<br/>(GitHub Actions CI/CD)"]
        P["GitHub Pages<br/>alexdjalali.github.io/blog/"]
    end

    A --> N
    B --> N
    C --> N
    D --> N
    E --> P
    F --> P
    G --> N
    H --> N
    J -->|"overrides !default vars"| H
    K --> N
    L --> N
    M -->|"overrides theme templates"| H
    N --> O
    O --> P
```

## Override Strategy

Hugo resolves files in project directories before the theme. This project uses three override layers:

```mermaid
graph LR
    subgraph "Resolution Order (left = highest priority)"
        A["Project layouts/"] --> B["Theme layouts/"]
        C["Project assets/scss/"] --> D["Theme assets/scss/"]
        E["Project assets/css/"] --> F["(no theme equivalent)"]
        G["Project assets/js/"] --> H["(no theme equivalent)"]
    end
```

| Layer | Purpose | Files |
|-------|---------|-------|
| **SCSS Overrides** | White/black color palette via `!default` variable precedence | `assets/scss/coder.scss`, `assets/scss/_variables.scss` |
| **Layout Overrides** | Custom templates for header, home, single post, search | `layouts/_partials/`, `layouts/posts/`, `layouts/search/` |
| **Custom Assets** | Feature-specific JS and CSS (not overriding theme) | `assets/js/*.js`, `assets/css/*.css` |

## Content Types

```mermaid
graph TD
    subgraph "Hugo Content Types"
        A["Posts (content/posts/)<br/>— Blog articles with tags, categories<br/>— AI badge, reading time, TOC"]
        B["Pages (content/*.md)<br/>— About, CV, Publications, AI Disclaimer<br/>— Custom JS for timelines"]
        C["Search (content/search/)<br/>— JSON index + JS search UI"]
        D["Taxonomies<br/>— /tags/, /categories/<br/>— Auto-generated by Hugo"]
    end
```

## Deployment Pipeline

```mermaid
sequenceDiagram
    participant Dev as Developer
    participant Git as git push main
    participant GA as GitHub Actions
    participant Hugo as Hugo Build
    participant Pages as GitHub Pages

    Dev->>Git: Push to main
    Git->>GA: Trigger workflow
    GA->>GA: Checkout (recursive submodules)
    GA->>GA: Install Hugo v0.156.0
    GA->>Hugo: hugo --minify
    Hugo->>Hugo: Compile SCSS, render templates
    Hugo->>GA: public/ directory
    GA->>Pages: Upload + deploy artifact
    Pages->>Pages: Live at alexdjalali.github.io/blog/
```

## Interactive Components

| Component | Technology | Files | Page |
|-----------|-----------|-------|------|
| CV Timeline | D3.js + vanilla JS | `cv-timeline.js`, `cv-timeline.css` | `/cv/` |
| About Timeline | D3.js + vanilla JS | `about-timeline.js`, `cv-timeline.css` | `/about/` |
| Client-side Search | Vanilla JS + Hugo JSON output | `search.js`, `layouts/search/` | `/search/` |
| Reading Progress | Vanilla JS scroll listener | `reading-progress.js` | All posts |
| Collapsible Code | Vanilla JS | `collapsible-code.js` | All posts |
| Share Buttons | Vanilla JS | `share.js` | All posts |
| Clickable Lists | Vanilla JS | `clickable-list.js` | Publications |
